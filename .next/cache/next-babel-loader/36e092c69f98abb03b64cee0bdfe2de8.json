{"ast":null,"code":"import Stripe from 'stripe';\nconst stripe = new Stripe(process.env.STRIPE_SECRET_KEY, {\n  apiVersion: '2020-08-27'\n});\nexport default (async (req, res) => {\n  const {\n    quantity\n  } = req.body;\n  console.log(req.headers.origin);\n  const session = await stripe.checkout.sessions.create({\n    payment_method_types: ['card'],\n    line_items: [{\n      price: process.env.PRICE_ID,\n      quantity\n    }],\n    mode: 'payment',\n    success_url: `${req.headers.origin}/result?session_id={CHECKOUT_SESSION_ID}`,\n    cancel_url: `${req.headers.origin}/checkout`\n  });\n  res.status(200).json({\n    sessionId: session.id\n  });\n});","map":{"version":3,"sources":["/Users/HTMusic/Desktop/PROJECTS/westfield-web/pages/api/checkout/session.ts"],"names":["Stripe","stripe","process","env","STRIPE_SECRET_KEY","apiVersion","req","res","quantity","body","console","log","headers","origin","session","checkout","sessions","create","payment_method_types","line_items","price","PRICE_ID","mode","success_url","cancel_url","status","json","sessionId","id"],"mappings":"AAEA,OAAOA,MAAP,MAAmB,QAAnB;AACA,MAAMC,MAAM,GAAG,IAAID,MAAJ,CAAWE,OAAO,CAACC,GAAR,CAAYC,iBAAvB,EAA0C;AACvDC,EAAAA,UAAU,EAAE;AAD2C,CAA1C,CAAf;AAIA,gBAAe,OAAOC,GAAP,EAA4BC,GAA5B,KAAqD;AAChE,QAAM;AAACC,IAAAA;AAAD,MAAaF,GAAG,CAACG,IAAvB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACM,OAAJ,CAAYC,MAAxB;AACA,QAAMC,OAAO,GAAG,MAAMb,MAAM,CAACc,QAAP,CAAgBC,QAAhB,CAAyBC,MAAzB,CAAgC;AAClDC,IAAAA,oBAAoB,EAAE,CAAC,MAAD,CAD4B;AAElDC,IAAAA,UAAU,EAAE,CAAC;AACTC,MAAAA,KAAK,EAAElB,OAAO,CAACC,GAAR,CAAYkB,QADV;AAETb,MAAAA;AAFS,KAAD,CAFsC;AAMlDc,IAAAA,IAAI,EAAE,SAN4C;AAOlDC,IAAAA,WAAW,EAAG,GAAEjB,GAAG,CAACM,OAAJ,CAAYC,MAAO,0CAPe;AAQlDW,IAAAA,UAAU,EAAG,GAAElB,GAAG,CAACM,OAAJ,CAAYC,MAAO;AARgB,GAAhC,CAAtB;AAUAN,EAAAA,GAAG,CAACkB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,IAAAA,SAAS,EAAEb,OAAO,CAACc;AAApB,GAArB;AACH,CAdD","sourcesContent":["import {NextApiRequest, NextApiResponse} from \"next\"\n\nimport Stripe from 'stripe';\nconst stripe = new Stripe(process.env.STRIPE_SECRET_KEY, {\n  apiVersion: '2020-08-27',\n});\n\nexport default async (req: NextApiRequest, res: NextApiResponse) => {\n    const {quantity} = req.body;\n    console.log(req.headers.origin)\n    const session = await stripe.checkout.sessions.create({\n        payment_method_types: ['card'],\n        line_items: [{\n            price: process.env.PRICE_ID,\n            quantity\n        }],\n        mode: 'payment',\n        success_url: `${req.headers.origin}/result?session_id={CHECKOUT_SESSION_ID}`,\n        cancel_url: `${req.headers.origin}/checkout`,\n    })\n    res.status(200).json({sessionId: session.id})\n}\n\n"]},"metadata":{},"sourceType":"module"}