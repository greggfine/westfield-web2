{"ast":null,"code":"import Stripe from 'stripe'; // const stripe = new Stripe(process.env.STRIPE_SECRET_KEY, {\n\nconst stripe = new Stripe(\"sk_test_51HhJfTHdeMHH0va0Y7reoKofxyTxyUppOAqGaPPxIBQIf4c9LTc4pdKNvg3QT9hq0Y2OxV0TyrgGswoe5AgDY6b200mQ1W0chu\", {\n  apiVersion: '2020-08-27'\n});\nexport default (async (req, res) => {\n  const {\n    quantity\n  } = req.body;\n  const session = await stripe.checkout.sessions.create({\n    payment_method_types: ['card'],\n    line_items: [{\n      price: process.env.PRICE_ID,\n      quantity\n    }],\n    mode: 'payment',\n    success_url: `${req.headers.origin}/result?session_id={CHECKOUT_SESSION_ID}`,\n    cancel_url: `${req.headers.origin}/checkout`\n  });\n  res.status(200).json({\n    sessionId: session.id\n  });\n});","map":{"version":3,"sources":["/Users/HTMusic/Desktop/PROJECTS/westfield-web/pages/api/checkout/session.ts"],"names":["Stripe","stripe","apiVersion","req","res","quantity","body","session","checkout","sessions","create","payment_method_types","line_items","price","process","env","PRICE_ID","mode","success_url","headers","origin","cancel_url","status","json","sessionId","id"],"mappings":"AAEA,OAAOA,MAAP,MAAmB,QAAnB,C,CACA;;AACA,MAAMC,MAAM,GAAG,IAAID,MAAJ,CAAW,6GAAX,EAA0H;AACvIE,EAAAA,UAAU,EAAE;AAD2H,CAA1H,CAAf;AAIA,gBAAe,OAAOC,GAAP,EAA4BC,GAA5B,KAAqD;AAChE,QAAM;AAACC,IAAAA;AAAD,MAAaF,GAAG,CAACG,IAAvB;AACA,QAAMC,OAAO,GAAG,MAAMN,MAAM,CAACO,QAAP,CAAgBC,QAAhB,CAAyBC,MAAzB,CAAgC;AAClDC,IAAAA,oBAAoB,EAAE,CAAC,MAAD,CAD4B;AAElDC,IAAAA,UAAU,EAAE,CAAC;AACTC,MAAAA,KAAK,EAAEC,OAAO,CAACC,GAAR,CAAYC,QADV;AAETX,MAAAA;AAFS,KAAD,CAFsC;AAMlDY,IAAAA,IAAI,EAAE,SAN4C;AAOlDC,IAAAA,WAAW,EAAG,GAAEf,GAAG,CAACgB,OAAJ,CAAYC,MAAO,0CAPe;AAQlDC,IAAAA,UAAU,EAAG,GAAElB,GAAG,CAACgB,OAAJ,CAAYC,MAAO;AARgB,GAAhC,CAAtB;AAUAhB,EAAAA,GAAG,CAACkB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,IAAAA,SAAS,EAAEjB,OAAO,CAACkB;AAApB,GAArB;AACH,CAbD","sourcesContent":["import {NextApiRequest, NextApiResponse} from \"next\"\n\nimport Stripe from 'stripe';\n// const stripe = new Stripe(process.env.STRIPE_SECRET_KEY, {\nconst stripe = new Stripe(\"sk_test_51HhJfTHdeMHH0va0Y7reoKofxyTxyUppOAqGaPPxIBQIf4c9LTc4pdKNvg3QT9hq0Y2OxV0TyrgGswoe5AgDY6b200mQ1W0chu\", {\n  apiVersion: '2020-08-27',\n});\n\nexport default async (req: NextApiRequest, res: NextApiResponse) => {\n    const {quantity} = req.body;\n    const session = await stripe.checkout.sessions.create({\n        payment_method_types: ['card'],\n        line_items: [{\n            price: process.env.PRICE_ID,\n            quantity\n        }],\n        mode: 'payment',\n        success_url: `${req.headers.origin}/result?session_id={CHECKOUT_SESSION_ID}`,\n        cancel_url: `${req.headers.origin}/checkout`,\n    })\n    res.status(200).json({sessionId: session.id})\n}\n\n"]},"metadata":{},"sourceType":"module"}